<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Bundle JSON Generator</title>
        <!-- CSS only -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    </head>
    <body>
        <div style="max-width: 1000px;margin: auto;padding-top:100px;">
            <form id="form" method="post">
                <div style="display: grid;grid-template-columns: 1fr 4fr;">
                    <div>
                        Category 1
                    </div>
                    <div class="category-data-set">
                        <div class="form-group row">
                            <label class="col-4 col-form-label" for="title">Category Title</label> 
                            <div class="col-8">
                            <input id="title" name="first[title]" placeholder="eg. Work Shirt" type="text" aria-describedby="titleHelpBlock" class="form-control title_input"> 
                            <span id="titleHelpBlock" class="form-text text-muted">Category title shown on user interface</span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="text" class="col-4 col-form-label">Category Tag</label> 
                            <div class="col-8">
                            <input id="text" name="first[category]" placeholder="eg. example-bundle-workshirts" type="text" class="form-control tag_input" aria-describedby="textHelpBlock"> 
                            <span id="textHelpBlock" class="form-text text-muted">To match the tag set in the admin</span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="limit" class="col-4 col-form-label">Number of Slots</label> 
                            <div class="col-8">
                            <select id="limit" name="first[limit]" class="custom-select limit_input" aria-describedby="limitHelpBlock" required="required">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                            </select> 
                            <span id="limitHelpBlock" class="form-text text-muted">Number of slots for this one category</span>
                            </div>
                        </div>
                    </div>
                </div>
                <hr>

                <div style="display: grid;grid-template-columns: 1fr 4fr;">
                    <div>
                        Category 2
                    </div>
                    <div class="category-data-set">
                        <div class="form-group row">
                            <label class="col-4 col-form-label" for="title">Category Title</label> 
                            <div class="col-8">
                            <input id="title" name="title" placeholder="eg. Work Shirt" type="text" aria-describedby="titleHelpBlock" class="form-control title_input"> 
                            <span id="titleHelpBlock" class="form-text text-muted">Category title shown on user interface</span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="text" class="col-4 col-form-label">Category Tag</label> 
                            <div class="col-8">
                            <input id="text" name="text" placeholder="eg. example-bundle-workshirts" type="text" class="form-control tag_input" aria-describedby="textHelpBlock"> 
                            <span id="textHelpBlock" class="form-text text-muted">To match the tag set in the admin</span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="limit" class="col-4 col-form-label">Number of Slots</label> 
                            <div class="col-8">
                            <select id="limit" name="limit" class="custom-select limit_input" aria-describedby="limitHelpBlock" required="required">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                            </select> 
                            <span id="limitHelpBlock" class="form-text text-muted">Number of slots for this one category</span>
                            </div>
                        </div>
                    </div>
                </div>
                <hr>

                <div style="display: grid;grid-template-columns: 1fr 4fr;">
                    <div>
                        Category 3 <br>(Optional)
                    </div>
                    <div class="category-data-set">
                        <div class="form-group row">
                            <label class="col-4 col-form-label" for="title">Category Title</label> 
                            <div class="col-8">
                            <input id="title" name="title" placeholder="eg. Work Shirt" type="text" aria-describedby="titleHelpBlock" class="form-control title_input"> 
                            <span id="titleHelpBlock" class="form-text text-muted">Category title shown on user interface</span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="text" class="col-4 col-form-label">Category Tag</label> 
                            <div class="col-8">
                            <input id="text" name="text" placeholder="eg. example-bundle-workshirts" type="text" class="form-control tag_input" aria-describedby="textHelpBlock"> 
                            <span id="textHelpBlock" class="form-text text-muted">To match the tag set in the admin</span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="limit" class="col-4 col-form-label">Number of Slots</label> 
                            <div class="col-8">
                            <select id="limit" name="limit" class="custom-select limit_input" aria-describedby="limitHelpBlock" required="required">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                            </select> 
                            <span id="limitHelpBlock" class="form-text text-muted">Number of slots for this one category</span>
                            </div>
                        </div>
                    </div>
                </div>
                <hr>

                <div style="display: grid;grid-template-columns: 1fr 4fr;">
                    <div>
                        Category 4 <br>(Optional)
                    </div>
                    <div class="category-data-set">
                        <div class="form-group row">
                            <label class="col-4 col-form-label" for="title">Category Title</label> 
                            <div class="col-8">
                            <input id="title" name="title" placeholder="eg. Work Shirt" type="text" aria-describedby="titleHelpBlock" class="form-control title_input"> 
                            <span id="titleHelpBlock" class="form-text text-muted">Category title shown on user interface</span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="text" class="col-4 col-form-label">Category Tag</label> 
                            <div class="col-8">
                            <input id="text" name="text" placeholder="eg. example-bundle-workshirts" type="text" class="form-control tag_input" aria-describedby="textHelpBlock"> 
                            <span id="textHelpBlock" class="form-text text-muted">To match the tag set in the admin</span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="limit" class="col-4 col-form-label">Number of Slots</label> 
                            <div class="col-8">
                            <select id="limit" name="limit" class="custom-select limit_input" aria-describedby="limitHelpBlock" required="required">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                            </select> 
                            <span id="limitHelpBlock" class="form-text text-muted">Number of slots for this one category</span>
                            </div>
                        </div>
                    </div>
                </div>
                <hr>
                <div class="form-group row">
                    <div class="offset-4 col-8">
                    <button name="submit" type="submit" class="btn btn-primary">Generate JSON</button>
                    </div>
                </div>
            </form>

            <div class="result-json-area" style="display: none;">
                <div class="form-group">
                    <label for="json-code" style="text-align:center">ðŸ‘‡ Copy this code ðŸ‘‡</label>
                    <input class="form-control" id="json-code">
                  </div>
            </div>
        </div>
    </body>
</html>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const form = document.getElementById('form');
        form.addEventListener("submit", (e) => {
            e.preventDefault();
            let jsArray = [];
            const dataSets = document.getElementsByClassName('category-data-set');
            console.log(dataSets);
            for (var i = 0; i < dataSets.length; i++){
                const title = dataSets[i].querySelector('.title_input').value;
                const tag = dataSets[i].querySelector('.tag_input').value;
                const limit = dataSets[i].querySelector('.limit_input').value;
                if(title != '' && tag != '' && limit != '') {
                    jsArray.push({
                        title,
                        tag,
                        limit
                    })
                }
            }
            const resultJSON = JSON.stringify(jsArray);
            document.querySelector('.result-json-area').style.display = "block";
            document.getElementById('json-code').value = resultJSON;
            console.log(resultJSON);
        });
    })
</script>